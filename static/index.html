<html>
<head>
    <title>Weather Prediction</title>
    <style></style>
    <script type='module'>
        import model from './model.js'
        import view from "./view.js";
        import controller from "./controller.js";


        const reducer = (map, val) => {
            if (map[val] == null) {
                map[val] = 1;
            } else {
                ++map[val];
            }
            return map;
        };

        window.init = function () {
            const request = new XMLHttpRequest()
            request.open('GET', 'http://localhost:8080/data/Horsens')
            request.send()
            request.onload = () => {
                const weatherData = JSON.parse(request.responseText)
                let a = {}
                a["minTemp"] = controller.getMinTemperature(weatherData)
                a["maxTemp"] = controller.getMaxTemperature(weatherData)
                a["avgCloud"] = controller.getAverageCloud(weatherData)
                a["avgWind"] = controller.getAverageWind(weatherData)
                a["sumPerc"] = controller.getSum(weatherData)
                // console.log(controller.getMinTemperature(weatherData))
                const theModel = model(weatherData, [a])
                const theView = view(window)
                theView.update(theModel)

            }
        }

    </script>
</head>
<body onload="init()">
<div id='base'>
    <h1>Weather Data</h1>
    <div id='weather_data'></div>
</div>
</body>
</html>

